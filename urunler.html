<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Ürünler | Şimşek Yapı Malzemeleri</title>

  <meta name="description" content="PVC, PPRC, Koruge, Yangın Malzemeleri ve daha birçok inşaat ürününü katalog sayfamızda inceleyin. Şimşek Yapı güvencesiyle.">
  <meta name="keywords" content="şımşek yapı ürünler, pvc ürünleri, pprc ürünleri, koruge boru, yangın malzemeleri, drenaj borusu, yapı malzemeleri">
  <meta name="author" content="Şimşek Yapı">
  <meta name="robots" content="index, follow">

  <!-- ✅ Canonical URL -->
  <link rel="canonical" href="https://www.simsekyapi.com/urunler.html">

  <!-- ✅ Open Graph (Facebook / WhatsApp) -->
  <meta property="og:title" content="Şimşek Yapı Ürün Kataloğu">
  <meta property="og:description" content="İnşaata dair tüm malzemeler tek çatı altında. PVC, PPRC, Koruge ve daha fazlası.">
  <meta property="og:image" content="https://www.simsekyapi.com/assets/img/logo.png">
  <meta property="og:url" content="https://www.simsekyapi.com/urunler.html">
  <meta property="og:type" content="website">

  <!-- ✅ Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Şimşek Yapı Ürün Kataloğu">
  <meta name="twitter:description" content="İnşaata dair tüm malzemeler tek çatı altında. PVC, PPRC, Koruge ve daha fazlası.">
  <meta name="twitter:image" content="https://www.simsekyapi.com/assets/img/logo.png">

  <!-- ✅ Favicons -->
  <link href="assets/img/logo.png" rel="icon">
  <link href="assets/img/logo.png" rel="apple-touch-icon">

  <!-- ✅ Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Poppins:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- ✅ Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- ✅ Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
</head>


<body class="projects-page">

  <header id="header" class="header d-flex align-items-center fixed-top" style="background-color: #000000;">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="index.html" class="logo d-flex align-items-center me-auto">

        <img src="assets/img/logo.png" alt="Simsek-Yapi-Logo">
        <h1 class="sitename">Şimşek Yapı</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html">Ana Sayfa</a></li>
          <li><a href="urunler.html" class="active">Ürünler</a></li>
          <li><a href="hakkimizda.html">Hakkımızda</a></li>

          <li><a href="markalarimiz.html">Markalarımız</a></li>
          <li class="dropdown"><a href="#"><span>Daha Fazla</span> <i
                class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul class="social-links mt-4">
              <li><a href="magazalarimiz.html">Mağazalarımız</a></li>
              <a href="https://www.facebook.com/simsekyapii/" target="_blank" aria-label="Facebook">Facebook<i
                  class="bi bi-facebook"></i></a>
              <a href="https://www.instagram.com/simsek.yapii/" target="_blank" aria-label="Instagram">Instagram<i
                  class="bi bi-instagram"></i></a>
              <a href="https://wa.me/905413851170?text=Merhaba%20bilgi%20almak%20istiyorum" target="_blank"
                aria-label="WhatsApp">WhatsApp<i class="bi bi-whatsapp"></i>
              </a>
            </ul>
          </li>


        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted d-none d-sm-block" href="iletisim.html">İletişime Geç</a>

    </div>
  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title dark-background" data-aos="fade"
      style="background-image: url(assets/img/construction/showcase-2.webp);">
      <div class="container position-relative">
        <h1>ÜRÜNLER</h1>
        <p>“İnşaata dair her şey, tek çatı altında.”</p>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="index.html">Anasayfa</a></li>
            <li class="current">Ürünler</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->

    <!-- products  -->
    <section id="projects" class="projects section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4">

          <!-- SOL: Kategoriler -->
          <aside class="col-lg-3 mb-4">
            <div class="p-3 rounded-3 category-box">
              <h5 id="kategoriBaslik" class="mb-3">Tüm Kategoriler</h5>
              <div id="categoryList"></div>
            </div>
          </aside>

          <!-- SAĞ: Ürün Grid (Dinamik ürünler buraya gelecek) -->
          <div class="col-lg-9">
            <div id="productGrid" class="row gy-4">

            </div>
            <div id="pagination" class="text-center mt-4">sss</div>
          </div>

        </div>
      </div>
    </section><!-- /products Section -->


  </main>

  <div id="footer"></div>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/js/include.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <script type="module">
    import { setupProductsPage } from './assets/js/products.js';
    setupProductsPage();
    let catController = null;



    // HTML tamamen yüklendiğinde çalış
    document.addEventListener('DOMContentLoaded', async () => {
      const container = document.getElementById("productGrid");
      container.innerHTML = '';

      // 1️⃣ Kategorileri Supabase'den çek
      const { data: categories, error } = await supabase
        .from('categories')
        .select('id, name, image_url')
        .order('id', { ascending: true });

      if (error) {
        console.error("Kategori çekme hatası:", error);
        container.innerHTML = `<p class="text-danger">Kategoriler yüklenemedi.</p>`;
        return;
      }

      // 2️⃣ Kategori kartlarını oluştur
      for (const cat of categories) {
        container.innerHTML += `
        <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
          <div class="project-card category-card" data-category-id="${cat.id}">
            <div class="project-image">
              <img src="${cat.image_url}" alt="${cat.name}" class="img-fluid">
              <div class="project-overlay">
                <div class="project-actions">
                  <span class="btn-project">Ürünleri Göster</span>
                </div>
              </div>
            </div>
            <div class="project-info">
              <h3>${cat.name}</h3>
            </div>
          </div>
        </div>
      `;
      }

      // 3️⃣ Kartlara tıklanıldığında kategori seçim işlemini başlat
      document.querySelectorAll('.category-card').forEach(card => {
        card.addEventListener('click', async () => {
          const catId = parseInt(card.dataset.categoryId);
          await catController.select(catId);

          window.scrollTo({
            top: document.getElementById("projects").offsetTop - 100,
            behavior: 'smooth'
          });
        });
      });

      // 4️⃣ Sol paneli initialize et
      catController = await initCategories({
        supabaseUrl: SUPABASE_URL,
        supabaseKey: SUPABASE_KEY,
        target: '#categoryList',
        autoSelectFirst: false, // Artık otomatik seçme yok
        onSelect: async (cat) => {
          console.log("Seçilen kategori:", cat);

          const { data: products, error } = await supabase
            .from("products")
            .select("id,slug, name, image_url")
            .eq("category_id", cat.id);


          container.innerHTML = ""; // önceki kartları temizle
          allProducts = products;
          currentPage = 1;
          renderProductsPage();


          if (error) {
            console.error("Ürün çekme hatası:", error);
            container.innerHTML = `<p class="text-danger">Ürünler yüklenemedi.</p>`;
            return;
          }

          if (!products.length) {
            container.innerHTML = `<p class="text-muted">Bu kategoride ürün bulunamadı.</p>`;
            return;
          }

          for (const product of products) {
            container.innerHTML += `
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
              <div class="project-card">
                <div class="project-image">
                  <img src="${product.image_url}" alt="${product.name}" class="img-fluid">
                  <div class="project-overlay">
                    <div class="project-actions">
                      <a   href="${product.slug
                ? `urun-detay.html?slug=${encodeURIComponent(product.slug)}`
                : `urun-detay.html?id=${encodeURIComponent(product.id)}`}"  
                 class="btn-project" >Detay</a>
                    </div>
                  </div>
                </div>
                <div class="project-info">
                  <h3>${product.name}</h3>
                </div>
              </div>
            </div>
          `;
          }
        }
      });
    });
    // Başlığa tıklanınca tüm kategorileri tekrar göster
    document.getElementById("kategoriBaslik").addEventListener("click", async () => {
      const { data: categories, error } = await supabase
        .from('categories')
        .select('id, slug,name, image_url')
        .order('id', { ascending: true });

      const container = document.getElementById("productGrid");
      container.innerHTML = '';



      for (const cat of categories) {
        container.innerHTML += `
      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
        <div class="project-card category-card" data-category-id="${cat.id}">
          <div class="project-image">
            <img src="${cat.image_url}" alt="${cat.name}" class="img-fluid">
            <div class="project-overlay">
              <div class="project-actions">
                <span class="btn-project">Ürünleri Göster</span>
              </div>
            </div>
          </div>
          <div class="project-info">
            <h3>${cat.name}</h3>
          </div>
        </div>
      </div>
    `;
      }

      // Yeni oluşturulan kartlara tekrar click event bağla
      document.querySelectorAll('.category-card').forEach(card => {
        card.addEventListener('click', async (e) => {
          const catId = card.dataset.categoryId;
          await catController.select(parseInt(catId));
          window.scrollTo({ top: document.getElementById("projects").offsetTop - 100, behavior: 'smooth' });
        });
      });
    });
    document.querySelectorAll('.category-button').forEach(btn => {
      btn.addEventListener('click', (e) => {
        document.querySelectorAll('.category-button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });


  </script>




</body>

</html>